# 草稿

## vp8

### 简单介绍

主要解决h264在华为手机上播放异常的问题，我们考虑使用vp8来解决问题，主要涉及到离线、在线部分的改动

### 离线部分

离线部分主要做的事情是数据的生产与存储，首先我们说一下是如何生产离线视频的

jpg->yuv->码流视频->视频及序列文件存储

我们做的修改主要是在生成视频这一步来进行的，使用了模块化的设计，以达到支持多格式（比如vp8,vp9,264）的目的

**支持多格式的好处**

我们在开发过程中，和编解码的涂老师他们进行了讨论，一开始是准备使用vp9来作为目标的视频流格式，后来vp9遇到了兼容性的问题，我们需要更换成vp8,非常快速的就完成了视频流格式的更换

#### 如何生成vp8的

yuv->视频流中，先将yuv -> webm -> ivf ,这样我们最终得到了适合的文件

我们会解析ivf文件，获得它是第几帧、他的offset以及long，存储这些内容到cfs上以备在线侧使用

**为什么要使用ivf**

ivf会比webm更加节省空间，ivf的视频header只占用32位，而webm占用649位

**webm为何需要占用649位，存储了什么信息**

### 在线部分

使用user-agent结合华为白名单判断推流vp8还是264

user-agent中有一个字段，由工信部下发给手机生产厂商，字段唯一且可靠，故可以根据这个字段判断推流类型

**webRTC协商部分**

TODO

## BBG项目

### 简单介绍

这个项目主要是一个游戏玩法，玩家会先组队，一个个玩家会不断地加入队列，当满足游戏的开启条件之后，我们会让玩家进行几轮游戏，每一轮游戏会不断地淘汰玩家，直到游戏几个轮次结束


